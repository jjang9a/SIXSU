<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/template}">

<head>
	<meta charset="UTF-8">
	<title>공통코드 관리</title>
	<style>
		h1 {
			margin-bottom: 100px;
		}
		h5{
			padding-left : 10px;
			margin-bottom : 11px;
			font-family: 'MaruBuri';
		}

		#grid {
			width: 350px;
			margin: auto;
		}

		#search {
			width: 350px;
			margin: auto;
			height: 440px;
			background-color: white;
			padding-top: 130px;
			display: none;
		}

		.codeBack {
			background-color: #ccdceb;
			padding: 35px 30px 40px 30px;
		}

		#group {
			width: 420px;
			float: left;
			margin-left: 70px;
		}

		#comm {
			float: left;
			width: 1000px;
			margin-left: 70px;
		}

		#gc {
			margin-left: 15px;
		}

		button {
			border: none;
			height: 35px;
			width: 80px;
			background-color: white;
			font-size: 14px;
		}

		.gSel {
			background-color: #ccdceb;
		}

		#searchForm {
			width: 265px;
			height: 150px;
			background-color: #e5edf5;
			margin: auto;
			text-align: center;
			padding-top: 35px;
			border-radius: 15px;
		}

		select {
			height: 29px;
		}

		#searchKey {
			width: 160px;
		}
	</style>

</head>

<body>
	<div layout:fragment="content">
		<h1 class="mt-4" style="font-family: 'MaruBuri';">공통코드 관리</h1>

		<!-- 왼쪽 틀 시작 -->
		<div id="group" class="codeBack">
			<!-- 탭 -->
			<button type="button" id="gc">그룹코드</button><button type="button" id="gs" class="gSel">검색</button>
			<!-- 그룹코드 선택시 : 그리드 (디폴트) -->
			<div id="grid"></div>
			<!-- 검색 선택시 : 검색 폼 -->
			<div id="search">
				<form action="" method="post" id="searchForm">
					<select name="searchType">
						<option value="com_id">코드 </option>
						<option value="com_name">이름 </option>
					</select>
					<input type="text" id="searchKey" name="gId"><br><br>
					<button type="button" class="sixBtn2">검색</button>
				</form>
			</div>
		</div>
		<!-- 왼쪽 틀 끝 -->

		<div id="comm" class="codeBack">
			<h5>상세정보</h5>
			<div id="commGrid"></div>
		</div>

		<script>
			// 사원목록 그리드 스크립트
			window.onload = function () {
				$.ajax({
					url: "/basic/groupList",
					method: "GET",
					dataType: "JSON",
					success: function (result) {
						console.log(result)
						grid.resetData(result);
					}
				});
				const grid = new tui.Grid({
					el: document.getElementById('grid'),
					scrollX: false,
					scrollY: false,
					minBodyHeight: 400,
					rowHeaders: ['rowNum'],
					columns: [{
						header: '그룹코드',
						name: 'gid',
						align: 'center'
					}, {
						header: '그룹명',
						name: 'gname',
						align: 'center'
					}]
				});

				// 그리드 색 변경 테마 적용
				tui.Grid.applyTheme('default', {
					cell: {
						header: {
							background: '#e5edf5'
						},
						normal: {
							background: '#ffffff'
						}
					}
				});

				// 그룹코드-검색 탭 토글
				$('#gc').on('click', function (e) {
					$(this).removeClass('gSel');
					$('#gs').addClass('gSel');
					$('#grid').css('display', 'block');
					$('#search').css('display', 'none');
				})

				$('#gs').on('click', function (e) {
					$(this).removeClass('gSel');
					$('#gc').addClass('gSel');
					$('#grid').css('display', 'none');
					$('#search').css('display', 'block');
				})
				
				// 오른쪽 그리드 생성
				const grid2 = new tui.Grid({
					el: document.getElementById('commGrid'),
					scrollX: false,
					scrollY: false,
					minBodyHeight: 400,
					rowHeaders: ['rowNum'],
					columns: [{
						header: '그룹코드',
						name: 'gid',
						align: 'center'
					}, {
						header: '그룹명',
						name: 'gname',
						align: 'center'
					}]
				});
				
				
				
				
	// 윈도우 온로드 괄호			
			}
		</script>
	</div>
</body>

</html>