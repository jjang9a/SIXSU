<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="co.sixsu.app.basic.mapper.BasicMapper">

<select id="getDate" resultType="java.util.Date">
	select sysdate from dual
</select>

<!-- 사원 관련 -->
<select id="empList" resultType="EmpVO">
	select emp_id, emp_name, emp_tell, TO_CHAR(emp_birth, 'yyyy/MM/dd') emp_birth, TO_CHAR(emp_hire, 'yyyy/MM/dd') emp_hire, emp_dept, emp_rk, emp_stat, emp_note  
	from employee
	order by emp_stat, emp_id
</select>

<update id="updatePw" parameterType="EmpVO">
	update employee
	set emp_pw = #{empPw}
	where emp_id = #{empId}
</update>

<insert id="addEmp" parameterType="EmpVO">
	insert into employee values (
	#{empId}, #{empName}, #{empTell}, TO_DATE(#{empBirth}, 'yyyy-MM-dd'), TO_DATE(#{empHire}, 'yyyy-MM-dd'), #{empDept}, #{empRk}, #{empStat}, #{empNote}, #{empPw} 
	)
</insert>

<update id="updateEmp" parameterType="EmpVO">
	update employee
	set emp_name=#{empName}, emp_tell=#{empTell}, emp_dept=#{empDept}, emp_rk=#{empRk}, emp_note=#{empNote}
	where emp_id=#{empId}
</update>
<!-- 사원 관련 종료 -->

<!-- 공통코드 관련 -->
<select id="groupList" resultType="CodeVO">
	select * from group_code
</select>

<select id="commList" parameterType="SearchDTO" resultType="CodeVO">
	SELECT *
	FROM common_code
	WHERE 
	<if test='searchType.equals("group")'>
		g_id = #{searchKey}
	</if>
	<if test='searchType.equals("code")'>
		com_id like '%'||#{searchKey}||'%'
	</if>
	<if test='searchType.equals("name")'>
		com_name like '%'||#{searchKey}||'%'
	</if>
	ORDER BY com_stat desc, com_id
</select>

<insert id="addCode" parameterType="CodeVO">
	INSERT INTO common_code VALUES(#{comId}, #{gId}, #{comName}, #{comNote}, #{comStat})
</insert>

<update id="updateCode" parameterType="CodeVO">
	UPDATE common_code
	SET com_name = #{comName}, com_note = #{comNote}, com_stat = #{comStat}
	WHERE com_id = #{comId}	
</update>

</mapper>